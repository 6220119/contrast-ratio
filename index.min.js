(function(t,o,e,n){"use strict";var r=angular.module("colorContrast",["angularSpectrumColorpicker"]),a="UPDATE_SCORE",i="UPDATE_FAV_ICON",l={semitransparent:"The background is semi-transparent, so the contrast ratio cannot be precise. Depending on what’s going to be underneath, it could be any of the following:",fail:"Fails WCAG 2.0 :-(","aa-large":"Passes AA for large text (above 18pt or bold above 14pt)",aa:"Passes AA level for any size text and AAA for large text (above 18pt or bold above 14pt)",aaa:"Passes AAA level for any size text"},c={fail:{range:[0,3],color:"hsl(0, 100%, 40%)"},"aa-large":{range:[3,4.5],color:"hsl(40, 100%, 45%)"},aa:{range:[4.5,7],color:"hsl(80, 60%, 45%)"},aaa:{range:[7,22],color:"hsl(95, 60%, 41%)"}};function u(t,o){var e,n,r,a;return function(){r=this;n=[].slice.call(arguments,0);a=new Date;var i=function(){var l=new Date-a;if(l<o){e=window.setTimeout(i,o-l)}else{e=null;t.apply(r,n)}};if(!e){e=window.setTimeout(i,o)}}}function s(t){var o=n("#test-color")[0],e=o.style.backgroundColor;o.style.background=t;return o.style.backgroundColor!==e}function g(t,o,e,n){return(o<e?o:e)-(n<t?t:n)}function f(t){var o,e={background:"white",text:"black"};if(t&&t.length>0){t=t.substr(1,t.length-1);o=t.split("-on-");if(o[0]){e.text=o[0]}if(o[1]){e.background=o[1]}}return e}function d(o,e,n){var r=this;r.updateColorsFromPath=function(){var t=f(n.path());r.backgroundColor=t.background;r.textColor=t.text};r.updateColorsFromPath();window.onhashchange=function(){r.updateColorsFromPath();o.$apply(function(){r.notifyChange()})};r.notifyChange=function(){if(s(r.textColor)||s(r.backgroundColor)){n.path(r.textColor+"-on-"+r.backgroundColor);o.$broadcast(a)}};r.updateScore=function(o,e){r.contrast=o.contrast(e);var n=r.contrast.min,a=r.contrast.max,i=a-n,u=[],s=[],f,d,h,p,C,w,b,v,m,k,x;for(f in c){if(c.hasOwnProperty(f)){d=c[f].range;h=d[0];p=d[1];if(n<p&&a>=h){u.push(f);s.push({level:f,percentage:100*g(n,a,p,h)/i})}}}r.ratioErrorExplain={};if(r.contrast.error){r.ratioErrorExplain.message="±"+r.contrast.error;r.ratioErrorExplain.tooltip=n+" - "+a}r.results={};r.output={};if(u.length<=1){r.results.message=l[u[0]];r.output.backgroundImage="";r.output.backgroundColor=c[u[0]].color}else{r.results.message=l.semitransparent;r.results.cases=[];for(C=0;C<u.length;C+=1){r.results.cases.push(l[u[C]])}w=[];b=0;for(C=0;C<2*s.length;C+=1){v=s[C%s.length];f=v.level;m=c[f].color;k=b+v.percentage/2;w.push(m+" "+b+"%",m+" "+k+"%");b=k}if(t.functions.indexOf("linear-gradient")>-1){x="linear-gradient(-45deg, "+w.join(", ")+")";r.output.backgroundImage=t.prefix+x}else{x="linear-gradient(135deg, "+w.join(", ")+")";r.output.backgroundImage=x}}r.output.classes=u.join(" ")};r.swapColor=function(){var t=this.backgroundColor;this.backgroundColor=this.textColor;this.textColor=t;this.notifyChange()};r.colorPickerOptions={preferredFormat:"hex",showAlpha:true,clickoutFiresChange:true};e(function(){r.notifyChange()})}d.$inject=["$scope","$timeout","$location"];r.controller("IndexCtrl",d);function h(t){return{link:function(e,n,r){e.$on(a,function(){t(function(){var t=new o(window.getComputedStyle(n[0]).backgroundColor),a=new o(window.getComputedStyle(n[0]).color),l=e.$eval(r.calcColorScore);l(t,a);e.$broadcast(i,t,a)})})}}}h.$inject=["$timeout"];r.directive("calcColorScore",h);function p(){return{link:function(t,o){var n=new e(o[0]);n=null}}}p.$inject=[];r.directive("incrementableText",p);function C(){return{link:function(t,o){if(o.is("input")){o[0].oninput=function(){o[0].style.width=o[0].value.length*.56+"em";o[0].style.width=o[0].value.length+"ch"}}}}}C.$inject=[];r.directive("autoLength",C);function w(){return{link:function(t,o,e){var n=window.document,r=n.createElement("canvas"),a=r.getContext("2d"),l=u(function(t,e){a.clearRect(0,0,16,16);a.fillStyle=t.toString();a.fillRect(0,0,8,16);a.fillStyle=e.toString();a.fillRect(8,0,8,16);o.attr("href",r.toDataURL())},300);r.width=r.height=16;n.body.appendChild(r);t.$on(i,function(t,o,e){l(o,e)})}}}w.$inject=[];r.directive("favoriteIcon",w)})(window.PrefixFree,window.Color,window.Incrementable,window.$);
//# sourceMappingURL=index.min.js.map